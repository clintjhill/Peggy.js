<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>Additive - Full Sample</title>
	<script src="../libs/strscan.js" type="text/javascript" charset="utf-8"></script>
	<script src="../src/peggy.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">

	var sample = new Peggy('sample');

	sample.root('additive', sample.sequence(':number', ':plus', ':number'), function(value){
		console.log('additive', value);
		return value['number'][0] + value['number'][1];
	});

	sample.rule('number', sample.sequence(':digit', ':space'), function(value){
		console.log('number', value);
		return value[0];
	});

	sample.rule('plus', sample.sequence('+', ':space'));

	sample.rule('digit', /\d+/, function(value){ 
		console.log('digit', value);
		return new Number(value);
	});

	sample.rule('space', /\s+/);
	
	function run(){
		var result;
		try{
			result = sample.parse(document.getElementById('sample').value);
		} catch(e){
			result = e;
		}
		document.getElementById('result').innerHTML = result;
	}
	</script>
</head>
<body id="jsgrammar">
	<h1>Additive - Full Sample</h1>
	<h2>Source</h2>
	<pre>
var sample = new Peggy('sample');

sample.root('additive', sample.sequence(':number', ':plus', ':number'), function(value){
	return value['number'][0] + value['number'][1];
});

sample.rule('number', sample.sequence(':digit', ':space'), function(value){
	return value.digit;
});

sample.rule('plus', sample.sequence('+'), ':space'));

sample.rule('digit', /\d+/, function(value){ 
	return new Number(value);
});

sample.rule('space', /\s+/);
	</pre>
	<h2>Demo</h2>
	<b>Try these:</b>
	<ul>
		<li>3 + 19</li>
		<li>4567 + 76</li>
		<li>55      +        3</li>
	</ul>
	<input type="text" id="sample" /><input type="button" value="Run!" onclick="run()"/>
	<h4>Result</h4>
	<div id="result"></div>
</body>
</html>