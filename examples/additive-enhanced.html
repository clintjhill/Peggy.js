<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Peggy.js by clintjhill</title>
    
    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
    <script src="../javascripts/scale.fix.js"></script>
    <script src="../dist/peggy-min-0.8.1.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Peggy.js</h1>
        <p>A simpler PEG generator in JavaScript</p>
        <p class="view"><a href="https://github.com/clintjhill/Peggy.js">View the Project on GitHub <small>clintjhill/Peggy.js</small></a></p>
        <ul>
          <li><a href="dist/peggy-0.8.1.js">Download <strong>Source</strong></a></li>
          <li><a href="dist/peggy-min-0.8.1.js">Download <strong>Minified</strong></a></li>
          <li><a href="https://github.com/clintjhill/Peggy.js">Fork On <strong>GitHub</strong></a></li>
        </ul>
        <p><small>Current Version: <strong>0.8.1</strong></small></p>
      </header> 
      <section>

	<script type="text/javascript" charset="utf-8">

	var sample = new Peggy('sample');

	sample.root('additive', sample.all(':number', ':plus', ':number'), function(value){
		return value.number[0] + value.number[1];
	});

	sample.rule('number', sample.any(/\d+/, /\s+/), function(value){
		return new Number(value[0]);
	});

	sample.rule('plus', sample.any('+', /\s+/));
	
	function run(){
		var result;
		try{
			result = sample.parse(document.getElementById('sample').value);
		} catch(e){
			result = e;
		}
		document.getElementById('result').innerHTML = "<strong>Result:</strong>&nbsp;" + result;
	}
	</script>
	<h1>Additive - Simplified Sample</h1>
      <p>As showin in the <a href="additive-easy.html">Additive - Easy</a> example, it's easy to create complex rules that provide a way to parse strings and evaluate them. But in most cases it takes even more complex structuring in order to safely parse any form of strings.</p>

      <p>In the Easy example the rule didn't account for any form of whitespace. In this example we'll fix that. Also we'll provide more structure by writing isolated rules for numbers and the plus operator. These can then be re-used as aliases in other rules, specifically the root rule.</p>
	<h2>Grammar</h2>
	<pre><code>var sample = new Peggy('sample');

sample.root('additive', sample.all(':number', ':plus', ':number'), function(value){
	return value.number[0] + value.number[1];
});

sample.rule('number', sample.any(/\d+/, /\s+/), function(value){
	return new Number(value[0]);
});

sample.rule('plus', sample.any('+', /\s+/));</code></pre>
      <p>The rules <code>'number'</code> and <code>'plus'</code> are rules that simply parse for a regular expression and whitespace. They use the <code>any</code> rule type that allows for the evaluation of any matches in the rule. Now within the <code>root</code> rule we can alias <code>:number</code> and <code>:plus</code>. In doing this the value object will have properties that match these names. Furthermore they will be indexed in the event the alias is used more than once.</p>

      <p>Keep reading ... there's more in the <a href="../api.html">JavaScript API</a>.</p>

	<h2>Demo</h2>
	<p>Try these as examples to parse:</p>
	<ul>
		<li>6 + 9</li>
		<li>456 +9</li>
	</ul>
	<input type="text" id="sample" /><input type="button" value="Run!" onclick="run()"/>
	<div id="result"></div>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/clintjhill">clintjhill</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>
