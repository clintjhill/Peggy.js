<!doctype html>
<html>
	<head>
		<script src="../src/peggy.js"></script>
		<script src="../grammars/dust.grammar.js"></script>
		<style>
			body {
				font-family: Helvetica, Arial, sans-serif;
				font-size: 10px;
			}

			h1, h2, h3, h4, h5 {
				margin: 3px;
				padding: 2px 0px;
			}

			.leftColumn, .rightColumn {
				float: left;
				padding: 15px;
			}

			.leftColumn {
				width: 40%;
			}

			.rightColumn {
				width: 40%;
			}

			textarea {
				width: 90%;
			}

			textarea#input {
				height: 270px;
			}
		</style>
	</head>
	<body>
		<h1>Peggy Grammar Runner</h1>
		<div class="leftColumn">
			<h3>Grammar:</h3>
			<select id="grammar">
				<option value="dust">DustJS</option>
				<option value="peggy">Peggy</option>
				<option value="css">CSS</option>
				<option value="javascript">JavaScript</option>
			</select>
		</div>
		<div style="clear:both;"></div>
		<div class="leftColumn"><h3>Input:</h3><textarea id="input">Hello {name}! You have {count} new messages.</textarea></div>
		<div class="rightColumn"><h3>Result:</h3><pre><code id="result">... waiting to parse ...</code></pre></div>
		<div style="clear:both;"></div>
		<div class="leftColumn">
			<button id="parse">Parse</button>
		</div>
		<script>
			var parseBtn = document.getElementById("parse"), 
				grammar = document.getElementById("grammar");
			parseBtn.addEventListener("click", function(evt){
				var input = document.getElementById("input"),
					result = document.getElementById("result");
				result.innerHTML = "... parsing ...";
				setTimeout(function(){
					try {
						result.innerHTML = window[grammar.value].parse(input.value);
					} catch(e) {
						result.innerHTML = e;
					}
				}, 200);
			});
		</script>
	</body>
</html>
