{"name":"Peggy.js","body":"Peggy.js - A simpler PEG generator in JavaScript\r\n======================================\r\n\r\nPeggy.js is a Parsing Expression Grammar (PEG) generator that is designed to be small and easy-to-use.\r\n\r\nA Parsing Expression Grammar (PEG) is used to create a set of rules from which you can parse string values. The result of this parse is to create a single tree of values as it matches the rules within the grammar.\r\n\r\nSee Also: [Parsing Expression Grammar](http://en.wikipedia.org/wiki/Parsing_expression_grammar)\r\n\r\nWith Peggy.js there are two ways to create a PEG:\r\n\r\n* Peggy JavaScript API\r\n* Peggy Syntax\r\n\r\n### Peggy JavaScript API ###\r\n\r\nTo create a grammar begin with the Peggy constructor.\r\n\t\r\n\tvar sample = new Peggy('additive');\r\n\r\nNow you can build rules from that grammar with the following API.\r\n\r\n\tsample.rule(name, declaration, extension);\r\n\r\nTo create the top of the parsing tree (the initial starting expression) use the `root` function.\r\n\r\n\tsample.root(name, declaration, extension);\r\n\t\r\nThe `declaration` parameter of `root` and `rule` functions can be a string, regular expression or an alias to another rule in the grammar. The `extension` parameter is a function used to evaluate the value of the matched string of the rule.\r\n\t\r\n\t// Root rule being set and an example of supplying an extension to evaluate the value\r\n\t// As well the root uses a sequence of aliases to other rules within the grammar\r\n\tsample.root('additive', sample.sequence(':number', ':plus', ':number'), function(value){\r\n\t\treturn value.number[0] + value.number[1];\r\n\t});\r\n\t\r\n\t// example of using a Regular Expression as the declaration of the rule\r\n\tsample.rule('number', /\\d+/, function(value){ \r\n\t\treturn new Number(value); \r\n\t});\r\n\t\r\n\t// example of using a string as the declaration of the rule\r\n\tsample.rule('number', '+');\r\n\t\r\nWith rules set against the grammar you can now parse strings.\r\n\r\n\tvar result = sample.parse('6+6');\t\r\n\t// result is 12\r\n\r\n\r\n### Peggy Syntax ###\r\n\r\nTo create a grammar named 'demo' you could write the following Peggy syntax.\r\n(Note: This is proposal and not implemented. There is no Peggy grammar included yet. See Roadmap.)\r\n\r\n\tdemo = {\r\n\t\tadditive: (:number, :plus, :number){\r\n\t\t\treturn value.number[0] + value.number[1];\r\n\t\t},\r\n\t\tnumber: (:digit, :space){\r\n\t\t\treturn value.digit;\r\n\t\t},\r\n\t\tplus: ('+', :space),\r\n\t\tdigit: (/\\d+/, :space){\r\n\t\t\treturn new Number(value[0]);\r\n\t\t},\r\n\t\tspace: /\\s+/\r\n\t}\r\n\r\n#### Breakdown of Peggy Syntax ####\r\n\r\nUsing the demo grammar above the following are definitions of the components of Peggy syntax.\r\n\r\n**Grammar:** `demo`\r\nThe name of this set of rules.\r\n\r\n**Rule:** `additive`\r\nA single rule name.\r\n\r\n**Non-Terminal:** `(:number, :plus, :number)`\r\nA Non-Terminal definition of a rule. In this case a Sequence. Repeat and Choice Non-Terminals are also available.\r\n\r\n**Terminal:** `/\\d+/`\r\nA Terminal definition, simply a singular term from the content of the parsing. Can be a string or a regular expression.\r\n\r\n**Alias:** `:number`\r\nA name to apply to another rule within the grammar.\r\n\r\n**Extension:** `{ return new Number(value[0]); }`\r\nA JavaScript block of code to execute that is provided a Value object. \r\n\r\n**Value:** `value[0]`\r\nA Value object that is the result of the expression evaluation.\r\n\r\n### Examples ###\r\n\r\nOpen these files in a browser to run a few sample grammars. Each demonstrates the ability to create a grammar through the Peggy JavaScript API. They are progressively built, so starting with the Additive Easy example you will see a very small and naive implementation and build on that for Simplified and Full. \r\n\r\n* [Additive Easy](examples/additive-easy.html)\r\n* [Additive Simplified](examples/additive-simplified.html)\r\n* [Additive Full](examples/additive-full.html)\r\n\r\n\r\nDevelopers\r\n----------\r\n\r\n#### Building Peggy.js ####\r\n\r\n`make` : creates both a peggy.js and a peggy-min.js file inside of a /dist directory\r\n\r\n`make lint` : tests the source of Peggy.js against JSLint\r\n\r\n`make spec` : run tests in /specs directory\r\n\r\n`make clean` : deletes the /dist directory\r\n\r\n### Requirements to build and run tests\r\n\r\n1. GNU Make\r\n2. [Node.js](http://nodejs.org/) 0.5.0 or greater\r\n3. [Node.js Package Manager](http://npmjs.org/) 1.0.0 or greater\r\n4. jasmine-node `npm install -g jasmine-node`\r\n\r\nRoadmap\r\n-------\r\n\r\n1. (Done) Finish API with Repeat, And, But etc. \r\n2. (Done) Better parse exception handling on missed rule and/or tree inconsistencies.\r\n3. Full line/character error messages.\r\n4. Peggy grammar to allow for building rules with a Peggy syntax instead of the JavaScript API.\r\n5. (Done) More testing.\r\n6. More samples of both Peggy syntax and API.\r\n7. (Done) Fully embed string scanner (maybe even optimize for use case).\r\n8. Improve the value object that is returned to rule extensions.\r\n9. Improve example pages - construct a tutorial.\r\n10. Enhance rule API so that it includes: Zero or more, One or more, Optional, And predicate and Not predicate.","tagline":"A simpler PEG generator in JavaScript","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}